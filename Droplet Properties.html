<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Biodelivery Simulator</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/4.6.1/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/4.6.1/firebase-auth.js"></script>
    <script defer src="/__/firebase/4.6.1/firebase-database.js"></script>
    <script defer src="/__/firebase/4.6.1/firebase-messaging.js"></script>
    <script defer src="/__/firebase/4.6.1/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>

    <!doctype html>
    <html lang="en">
      <head>
        <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyCHBinUqUn2Xnt4FQZHeivt_6UXX-5SX1M",
            authDomain: "bio-sim.firebaseapp.com",
            databaseURL: "https://bio-sim.firebaseio.com",
            projectId: "bio-sim",
            storageBucket: "bio-sim.appspot.com",
            messagingSenderId: "1069672537767"
          };
          firebase.initializeApp(config);
        </script>



    </script>

    <script src="app.js"></script>
    <script> function showWarning() { 
        var db = firebase.database()
        var ref = db.ref('/Defaults/Droplet Properties/')
        var checkMe1 = document.getElementById('diffCo').value
        var checkMe2 = document.getElementById('surfTenLV').value
        var checkMe3 = document.getElementById('dropDV').value
        var checkMe4 = document.getElementById('den').value
        var checkMe5 = document.getElementById('logP').value
        var datum 
        var modal
        ref.once('value', function(snapshot){
            data = snapshot.val()
        datumDiffCo = data.diffusionCoefficent
        datumSurfTen = data.surfaceTensionLiquidVapour
        datumDropDV = data.dropletDynamicViscocity
        datumDen = data.density
        datumLogP = data.logP
        if (checkMe1 == datumDiffCo || checkMe2 == datumSurfTen || checkMe3 == datumDropDV || checkMe4 == datumDen || checkMe5 == datumLogP) { 
            console.log('line 238')
            modal = window.confirm('You are being defaulted to a Naked AI')
            if (modal == true) { 
            sessionStorage.setItem('pagetitle', 'Droplet Properties')
            updateProfileSim()
            } else {  } 
         } else { 
                sessionStorage.setItem('pagetitle', 'Droplet Properties')
                updateProfileSim()}
       
         
        })
    }
    </script>



  <title>Bio Delivery Simulator</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

  <link rel="stylesheet" href="app.css">
</head>
<body>
  <div class="container bg-light" style="padding: 40px 0">

    <h1 class="text-center">Bio Delivery Simulator</h1>

    <hr/>

    <!-- Progress bar -->
    <div class="row bs-wizard" style="border-bottom:0;">
        <div class="col-sm bs-wizard-step complete">
            <div class="text-center bs-wizard-stepnum"><strong>Spray</strong></div>
            <div class="progress"><div class="progress-bar"></div></div>
            <a href="Spray.html" class="bs-wizard-dot"></a>
        </div>

        <div class="col-sm bs-wizard-step complete"><!-- complete -->
            <div class="text-center bs-wizard-stepnum"><strong>Leaf Properties</strong></div>
            <div class="progress"><div class="progress-bar"></div></div>
            <a href="Leaf Properties.html" class="bs-wizard-dot"></a>
        </div>

        <div class="col-sm bs-wizard-step active"><!-- complete -->
            <div class="text-center bs-wizard-stepnum"><strong>Droplet Properties</strong></div>
            <div class="progress"><div class="progress-bar"></div></div>
            <a href="Droplet Properties.html" class="bs-wizard-dot"></a>
        </div>

        <div class="col-sm bs-wizard-step disabled"><!-- active -->
            <div class="text-center bs-wizard-stepnum">AI/Formulation Properties</div>
            <div class="progress"><div class="progress-bar"></div></div>
            <a href="#" class="bs-wizard-dot"></a>
        </div>

        <div class="col-sm bs-wizard-step disabled"><!-- active -->
            <div class="text-center bs-wizard-stepnum">Time Points</div>
            <div class="progress"><div class="progress-bar"></div></div>
            <a href="#" class="bs-wizard-dot"></a>
        </div>
    </div>

    <hr/>


   <!-- Form -->
    <div class="row justify-content-center">
    <div class="col-sm-10 align-self-center">
            <form>

<div class="form-group row">
   <label class="col-sm-5" >Diffusion Coefficent</label>
   <div class="col-sm-2">
        <input type="number" id="diffCo" maxlength="10" name="value"  value=""/>
   </div>
   <label class="col-sm-2" for="exampleInputEmail1"></label>m^2/s</label>
</div>

<div class="form-group row">
   <label class="col-sm-5" >Surface Tension of Liquid Vapour</label>
   <div class="col-sm-2">
        <input type="number" id="surfTenLV" maxlength="10" name="value"  value=""/>
   </div>
    <label class="col-sm-2" for="exampleInputEmail1"></label>mN/m</label>
</div>

<div class="form-group row">
   <label class="col-sm-5" >Droplet Dynamic Viscocity</label>
   <div class="col-sm-2">
        <input type="number" id="dropDV" maxlength="10" name="value"  value=""/>
   </div>
   <label class="col-sm-2" for="exampleInputEmail1"></label>mPa/s</label>
</div>

<div class="form-group row">
   <label class="col-sm-5" >Density</label>
   <div class="col-sm-2">
        <input type="number" id="den" maxlength="10" name="value"  value=""/>
   </div>
   <label class="col-sm-2" for="exampleInputEmail1"></label>kg/m^3</label>
</div>

<div class="form-group row">
   <label class="col-sm-5" >Log P</label>
   <div class="col-sm-2">
        <input type="number" id="logP" maxlength="10" name="value"  value=""/>
   </div>
</div>




<!-- Button trigger modal -->
<div class="col-sm-2 offset-sm-5">
        <button type="button" id="loadDAI" onClick="showWarning()" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        Next
        </button>



<!-- Modal -->


</div>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
<script var database ="firebase.database.bio-sim.firebaseapp.com" (); > </script>

<script>
        var db = firebase.database();
        var ref = db.ref('/Current Simulation/Load_Custom_Entry');
        ref.once('value', function(snapshot) {
        var checkIfUserVals = snapshot.val().User_Droplet;

        if (checkIfUserVals == 0) {
            loadDropletPropDefaults()
        } else if (checkIfUserVals == 1) {
            var db = firebase.database();
            var ref = db.ref('/Current Simulation/Current Sim/Droplet_Properties');
            ref.once('value', function(snapshot) {
                document.getElementById("diffCo").value = snapshot.val().Diffusion_Coefficient;
                document.getElementById("surfTenLV").value = snapshot.val().cuticularThickness;
                document.getElementById("dropDV").value = snapshot.val().Droplet_Dynamic_Viscocity;
                document.getElementById("den").value = snapshot.val().Log_P;
                document.getElementById("logP").value = snapshot.val().Surface_Tension;
            })

        }

        })
        </script>

</body>
</html>
