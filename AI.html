<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <script> function getVal() {
         return document.getElementById('size').value = document.getElementById('nozzles').value }
    </script>
    <script> function resetVal() {
        document.getElementById('size').value = document.getElementById('nozzles').value }
    </script>

    <title>Biodelivery Simulator</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/4.6.1/firebase-app.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/4.6.1/firebase-auth.js"></script>
    <script defer src="/__/firebase/4.6.1/firebase-database.js"></script>
    <script defer src="/__/firebase/4.6.1/firebase-messaging.js"></script>
    <script defer src="/__/firebase/4.6.1/firebase-storage.js"></script>
    <!-- initialize the SDK after all desired features are loaded -->
    <script defer src="/__/firebase/init.js"></script>

    <!doctype html>
    <html lang="en">
      <head>

        <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyCHBinUqUn2Xnt4FQZHeivt_6UXX-5SX1M",
            authDomain: "bio-sim.firebaseapp.com",
            databaseURL: "https://bio-sim.firebaseio.com",
            projectId: "bio-sim",
            storageBucket: "bio-sim.appspot.com",
            messagingSenderId: "1069672537767"
          };
          firebase.initializeApp(config);
        </script>



    </script>

    <script src="app.js"></script>
    <script> function showWarning() { 
        var db = firebase.database()
        var ref = db.ref('/Defaults/AI/')
        var checkMe1 = document.getElementById('molarmass').value
        var checkMe2 = document.getElementById('partialpressure').value
        var checkMe3 = document.getElementById('watersolubility').value
        var checkMe4 = document.getElementById('volatility').value
        var checkMe5 = document.getElementById('crystallisation').value
        var checkMe6 = document.getElementById('dissolution').value
        var datum 
        var modal
        ref.once('value', function(snapshot){
            data = snapshot.val()
        datumMolar = data.molarmass
        datumPartialPres = data.partialPressure
        datumWaterSol = data.waterSolubility
        datumVol = data.volatility
        datumCrys = data.crystallisation
        datumDiss = data.dissolution
        if (checkMe1 == datumMolar || checkMe2 == datumPartialPres || checkMe3 == datumWaterSol || checkMe4 == datumVol || checkMe5 == datumCrys || checkMe6 == datumDiss) { 
            console.log('line 238')
            modal = window.confirm('You are being defaulted to a Naked AI')
            if (modal == true) { 
            sessionStorage.setItem('pagetitle', 'AI')
            updateProfileSim()
            } else {  } 
         } else {
                sessionStorage.setItem('pagetitle', 'AI') 
                updateProfileSim()}
       
         
        })
    }
    </script>

  <title>Bio Delivery Simulator</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

  <link rel="stylesheet" href="app.css">
</head>
<body>
  <div class="container bg-light" style="padding: 40px 0">

    <h1 class="text-center">Bio Delivery Simulator</h1>

    <hr/>

    <!-- Progress bar -->
    <div class="row bs-wizard" style="border-bottom:0;">
        <div class="col-sm bs-wizard-step complete">
            <div class="text-center bs-wizard-stepnum"><strong>Spray</strong></div>
            <div class="progress"><div class="progress-bar"></div></div>
            <a href="Spray.html" class="bs-wizard-dot"></a>
        </div>

        <div class="col-sm bs-wizard-step complete"><!-- complete -->
            <div class="text-center bs-wizard-stepnum"><strong>Leaf Properties</strong></div>
            <div class="progress"><div class="progress-bar"></div></div>
            <a href="Leaf Properties.html" class="bs-wizard-dot"></a>
        </div>

        <div class="col-sm bs-wizard-step complete"><!-- complete -->
            <div class="text-center bs-wizard-stepnum"><strong>Droplet Properties</strong></div>
            <div class="progress"><div class="progress-bar"></div></div>
            <a href="Droplet Properties.html" class="bs-wizard-dot"></a>
        </div>

        <div class="col-sm bs-wizard-step active"><!-- active -->
            <div class="text-center bs-wizard-stepnum"><strong>AI/Formulation Properties</strong></div>
            <div class="progress"><div class="progress-bar"></div></div>
            <a href="AI.html" class="bs-wizard-dot"></a>
        </div>

        <div class="col-sm bs-wizard-step disabled"><!-- active -->
            <div class="text-center bs-wizard-stepnum">Time Points</div>
            <div class="progress"><div class="progress-bar"></div></div>
            <a href="#" class="bs-wizard-dot"></a>
        </div>
    </div>

    <hr/>

    
     <!-- Form -->
    <div class="row justify-content-center">
    <div class="col-sm-10 align-self-center">
            <form>

<div class="form-group row">
   <label class="col-sm-5" >AI Molar mass</label>
   <div class="col-sm-2">
        <input type="number" id="molarmass" maxlength="10" name="value"  value=""/>
   </div>
</div>

<div class="form-group row">
   <label class="col-sm-5" >AI Partial Pressure</label>
   <div class="col-sm-2">
        <input type="number" id="partialpressure" maxlength="10" name="value"  value=""/>
   </div>
</div>

<div class="form-group row">
   <label class="col-sm-5" >AI Solubility in Water</label>
   <div class="col-sm-2">
        <input type="number" id="watersolubility" maxlength="10" name="value"  value=""/>

   </div>
<label class="col-sm-1" ></label>ppm</label></div>

<div class="form-group row">
   <label class="col-sm-5" >Volatility Rate*</label>
   <div class="col-sm-2">
        <input type="number" id="volatility" maxlength="10" name="value"  value=""/>
   </div>
<label class="col-sm-1" ></label>1/s</label></div>

<div class="form-group row">
   <label class="col-sm-5" >Chemical Stability Rate*</label>
<div class="col-sm-2">
        <label class="form-check-label">
            <input class="form-check-input" id="chemicalstability" type="radio" name="value"  value="0"> Stable
        </label>
    </div>
    <div class="form-check form-check-inline">
            <label class="form-check-label">
                <input class="form-check-input" id="chemicalstability" type="radio" name="value"  value="1e-2"> Unstable
            </label>
        </div>
   <div class="col-sm-2">
        <input type="number" id="chemicalstability" maxlength="10" name="value"  value=""/>
   </div>
    <label class="col-sm-1" ></label>1/s</label>
</div>

<div class="form-group row">
<label class="col-sm-5" for="exampleInputEmail1">Formulation type</label>
<!-- <div class="col-sm-2"> -->
    <div class="form-check-inline"oninput='getVal()' onclick='resetVal()'>
        <select id="nozzles" class="form-control" >
            <option>none</option>
            <option value='1e-9'> SL</option>
            <option value="1e-12">EC</option>
            <option value="1e-13">SC</option>
            <option value="1e-13">OD</option>
            <option value="1e-12">DC</option>
            <option value="1e-13">WG</option>
            <option value="1e-13">CS</option>
            <option value="1e-12">EW</option>
        </select>
    </div>
    <div class="form-check form-check-inline">
            <input type="number" id="size" maxlength="5" name="value"  value="" required />
    </div>


</div>

<div class="form-group row">
   <label class="col-sm-5" >Photostability Rate</label>
<div class="col-sm-2">
        <label class="form-check-label">
            <input class="form-check-input" id="photostability" type="radio" name="value"  value="0"> Stable
        </label>
    </div>
    <div class="form-check form-check-inline">
            <label class="form-check-label">
                <input class="form-check-input" id="photostability" type="radio" name="value"  value="0.03"> Unstable
            </label>
        </div>
   <div class="col-sm-2">
        <input type="number" id="photostability" maxlength="10" name="value"  value=""/>
         </div>
    <label class="col-sm-1" ></label>1/s</label>



</div>

<div class="form-group row">
   <label class="col-sm-5" >Crystallisation Rate</label>
   <div class="col-sm-2">
        <input type="number" id="crystallisation" maxlength="10" name="value"  value=""/>
   </div>
    <label class="col-sm-1" ></label>1/s</label>
</div>

<div class="form-group row">
   <label class="col-sm-5" >Dissolution Rate</label>
   <div class="col-sm-2">
        <input type="number" id="dissolution" maxlength="10" name="value"  value=""/>
   </div>
  <label class="col-sm-1" ></label>1/s</label>
</div>
<div class="form-group row">
    <label class="col-sm-5" for="exampleInputEmail1">Is it a Procide? </label>
    <div class="col-sm-2">
      <div class="form-check form-check-inline">
          <label class="form-check-label">
              <input class="form-check-input" id="procide" type="radio" name="inlineRadioOptions"  value="true"> Yes
          </label>
      </div>
      <div class="form-check form-check-inline">
          <label class="form-check-label">
              <input class="form-check-input" id="procide" type="radio" name="inlineRadioOptions"  value="false"> No
            </label>
        </div>
    </div>
</div>

</form>
</div>
</div>
<!-- Button trigger modal -->
<div class="col-sm-2 offset-sm-5">
<button type="button" id="loadDroplet" onClick="showWarning()" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
Next
</button>



   </form>
   </div>
  </div>

<!-- Modal -->

</div>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
<script var database ="firebase.database.bio-sim.firebaseapp.com" (); > </script>

<script>
        var db = firebase.database();
        var ref = db.ref('/Current Simulation/Load_Custom_Entry');
        ref.once('value', function(snapshot) {
        var checkIfUserVals = snapshot.val().User_AI;

        if (checkIfUserVals == 0) {
            loadAIDefaults()
        } else if (checkIfUserVals == 1) {
            var db = firebase.database();
            var ref = db.ref('/Current Simulation/Current Sim/AI');
            ref.once('value', function(snapshot) {
                document.getElementById("molarmass").value = snapshot.val().Molar_Mass;
                document.getElementById("partialpressure").value = snapshot.val().Partial_Pressure;
                document.getElementById("watersolubility").value = snapshot.val().Solubility_in_water;
                document.getElementById("volatility").value = snapshot.val().Volatility_Rate;
                document.getElementById("chemicalstability").value = snapshot.val().Chemical_stability;
                document.getElementById("photostability").value = snapshot.val().Photostability;
                document.getElementById("crystallisation").value = snapshot.val().Crystalisation_Rate;
                document.getElementById("dissolution").value = snapshot.val().Dissolution_Rate;
            })

        }

        })
        </script>
</body>
</html>
